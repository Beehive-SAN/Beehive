<!DOCTYPE html>
<html>
  <head>
    <title>숫자 공유 사이트</title>
    <meta charset="utf-8" />
    <script src="https://apis.google.com/js/api.js"></script>
    <script>
      const API_KEY = 'YOUR_API_KEY'; // 생성한 API 키로 교체
      const SPREADSHEET_ID = 'YOUR_SPREADSHEET_ID'; // 시트 ID로 교체
      const RANGE = 'Sheet1!A:A'; // 데이터를 추가할 시트와 범위

      function initClient() {
        gapi.client.init({
          apiKey: API_KEY,
          discoveryDocs: ["https://sheets.googleapis.com/$discovery/rest?version=v4"],
        }).then(() => {
          loadData();
        });
      }

      function loadGapi() {
        gapi.load('client', initClient);
      }

      function submitNumber() {
        const input = document.getElementById('numberInput');
        const value = input.value;
        if (!value) return;

        const params = {
          spreadsheetId: SPREADSHEET_ID,
          range: RANGE,
          valueInputOption: 'USER_ENTERED',
        };

        const valueRangeBody = {
          values: [[value]],
        };

        gapi.client.sheets.spreadsheets.values.append(params, valueRangeBody).then(() => {
          input.value = '';
          loadData();
        });
      }

      function loadData() {
        gapi.client.sheets.spreadsheets.values.get({
          spreadsheetId: SPREADSHEET_ID,
          range: RANGE,
        }).then(response => {
          const data = response.result.values || [];
          const list = document.getElementById('numberList');
          list.innerHTML = '';
          data.forEach(row => {
            const li = document.createElement('li');
            li.textContent = row[0];
            list.appendChild(li);
          });
        });
      }
    </script>
  </head>
  <body onload="loadGapi()">
    <h1>숫자 공유 사이트</h1>
    <input type="number" id="numberInput" placeholder="숫자를 입력하세요" />
    <button onclick="submitNumber()">제출</button>
    <ul id="numberList"></ul>
  </body>
</html>
